<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>File Index</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif; line-height: 1.6; color: #24292e; max-width: 800px; margin: 40px auto; padding: 0 20px; }
        h1 { border-bottom: 1px solid #eaecef; padding-bottom: .3em; }
        ul { list-style: none; padding: 0; }
        li { border-bottom: 1px solid #e1e4e8; padding: 10px 0; display: flex; align-items: center; }
        a { color: #0366d6; text-decoration: none; font-weight: 500; }
        a:hover { text-decoration: underline; }
        .icon { margin-right: 10px; font-size: 1.2em; }
        .footer { margin-top: 50px; font-size: 0.8em; color: #6a737d; text-align: center; }
    </style>
</head>
<body>

    <h1 id="repo-title">Files</h1>
    <ul id="file-list">
        <li>íŒŒì¼ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</li>
    </ul>

    <div class="footer">
        Powered by GitHub API
    </div>

    <script>
        async function fetchFiles() {
            // í˜„ì¬ URLì—ì„œ ì‚¬ìš©ìëª…ê³¼ ë ˆí¬ì§€í† ë¦¬ëª… ì¶”ì¶œ
            const pathParts = window.location.pathname.split('/');
            const user = window.location.hostname.split('.')[0];
            const repo = pathParts[1];

            const fileListElement = document.getElementById('file-list');
            const titleElement = document.getElementById('repo-title');
            
            titleElement.innerText = `${repo} Index`;

            try {
                // GitHub API í˜¸ì¶œ (ê³µê°œ ë ˆí¬ì§€í† ë¦¬ ê¸°ì¤€)
                const response = await fetch(`https://api.github.com/repos/${user}/${repo}/contents/`);
                const files = await response.json();

                if (!Array.isArray(files)) {
                    fileListElement.innerHTML = '<li>íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ê±°ë‚˜ API ì œí•œì— ë„ë‹¬í–ˆìŠµë‹ˆë‹¤.</li>';
                    return;
                }

                fileListElement.innerHTML = ''; // ì´ˆê¸°í™”

                files.forEach(file => {
                    // index.html ë³¸ì¸ì€ ëª©ë¡ì—ì„œ ì œì™¸ (ì„ íƒ ì‚¬í•­)
                    if (file.name === 'index.html') return;

                    const li = document.createElement('li');
                    const icon = file.type === 'dir' ? 'ğŸ“' : 'ğŸ“„';
                    
                    // GitHub Pages ê²½ë¡œì— ë§ì¶° ë§í¬ ìƒì„±
                    const link = file.type === 'dir' 
                        ? `https://${user}.github.io/${repo}/${file.path}/` 
                        : file.download_url;

                    li.innerHTML = `<span class="icon">${icon}</span><a href="${file.path}">${file.name}</a>`;
                    fileListElement.appendChild(li);
                });
            } catch (error) {
                fileListElement.innerHTML = '<li>ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.</li>';
                console.error(error);
            }
        }

        fetchFiles();
    </script>
</body>
</html>
